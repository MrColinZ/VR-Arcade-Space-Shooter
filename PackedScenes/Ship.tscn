[gd_scene load_steps=22 format=3 uid="uid://h0ctogrwmi1w"]

[ext_resource type="Script" path="res://Scripts/TestShip.gd" id="1_eyhyv"]
[ext_resource type="PackedScene" uid="uid://b3rn1uu2akbuo" path="res://PackedScenes/Shots/player_shot_1.tscn" id="2_n42wk"]
[ext_resource type="Script" path="res://Scripts/XROrigin.gd" id="3_3lpgn"]
[ext_resource type="AudioStream" uid="uid://nhd28vasq82h" path="res://Recources/Soundeffects/sci-fi-energy-gun-39409.mp3" id="3_5r6up"]
[ext_resource type="Script" path="res://Scripts/SoundRandomPichPlayer.gd" id="4_upq0j"]
[ext_resource type="PackedScene" uid="uid://c03sc8swf0een" path="res://Recources/Arcade Ship.escn" id="6_fnhnm"]
[ext_resource type="Texture2D" uid="uid://cnv1wr2yd0xg3" path="res://Recources/Textures/ShipTexture.png" id="7_kgaa5"]
[ext_resource type="AudioStream" uid="uid://blxya6mngkihp" path="res://Recources/Soundeffects/mixkit-blast-hit-with-echo-2186.wav" id="8_2v0aq"]
[ext_resource type="Texture2D" uid="uid://b7cqiisimggib" path="res://Recources/Textures/Zielkreuz.png" id="9_y81nc"]
[ext_resource type="Script" path="res://Scripts/Crossair.gd" id="10_6k6qn"]
[ext_resource type="Texture2D" uid="uid://co8vg3w64pub7" path="res://Recources/Textures/Healthbar Animation/HB1.png" id="11_xrn4d"]
[ext_resource type="Texture2D" uid="uid://57h6v3ndj6q8" path="res://Recources/Textures/Healthbar Animation/HB2.png" id="12_x4uh2"]
[ext_resource type="Texture2D" uid="uid://67ke03cfwg47" path="res://Recources/Textures/Healthbar Animation/HB3.png" id="13_3molc"]
[ext_resource type="Texture2D" uid="uid://damvjb8vtvkbq" path="res://Recources/Textures/Healthbar Animation/HB4.png" id="14_4owg7"]
[ext_resource type="Texture2D" uid="uid://bjd1ro2eigxde" path="res://Recources/Textures/Healthbar Animation/HB5.png" id="15_r6xve"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_xti5l"]
albedo_texture = ExtResource("7_kgaa5")
texture_filter = 2

[sub_resource type="BoxShape3D" id="BoxShape3D_ccn0n"]
size = Vector3(5.19928, 1.62898, 3.75836)

[sub_resource type="Animation" id="Animation_o5k53"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Mesh:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_4yvb3"]
resource_name = "ship_hit"
length = 0.35
step = 0.01
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Mesh:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.02, 0.04, 0.06, 0.08, 0.11, 0.15),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0.092028, 0, 0), Vector3(-0.0574132, 0.070757, 0), Vector3(0.047112, -0.0324032, 0), Vector3(-0.0584273, 0.0183845, 0), Vector3(0.0220661, -0.0124594, 0), Vector3(-0.00110066, 0.00830829, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_3d6mu"]
_data = {
"RESET": SubResource("Animation_o5k53"),
"ship_hit": SubResource("Animation_4yvb3")
}

[sub_resource type="SpriteFrames" id="SpriteFrames_kdg36"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("11_xrn4d")
}, {
"duration": 1.0,
"texture": ExtResource("12_x4uh2")
}, {
"duration": 1.0,
"texture": ExtResource("13_3molc")
}, {
"duration": 1.0,
"texture": ExtResource("14_4owg7")
}, {
"duration": 1.0,
"texture": ExtResource("15_r6xve")
}],
"loop": true,
"name": &"Health",
"speed": 1.0
}]

[node name="Ship" type="Area3D" groups=["Player"]]
collision_mask = 90
script = ExtResource("1_eyhyv")
shot_scene = ExtResource("2_n42wk")

[node name="Mesh" parent="." instance=ExtResource("6_fnhnm")]
transform = Transform3D(-1.28949e-08, 0, -0.295, 0, 0.295, 0, 0.295, 0, -1.28949e-08, 0, 0, 0)

[node name="Ship" parent="Mesh" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_xti5l")

[node name="Cube" parent="Mesh" index="1"]
transform = Transform3D(1, 0, -2.84217e-14, 0, 1, 0, 2.84217e-14, 0, 1, 3.84352, -1.28689, -1.68006e-07)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00118381, 0.000929654, 0.571503)
shape = SubResource("BoxShape3D_ccn0n")

[node name="XROrigin3D" type="XROrigin3D" parent="."]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, -0.766568, 0.552381)
script = ExtResource("3_3lpgn")

[node name="XRCamera3D" type="XRCamera3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.45044e-08, 1.03899, 0.165911)

[node name="LeftHand" type="XRController3D" parent="XROrigin3D"]
tracker = &"left_hand"

[node name="RightHand" type="XRController3D" parent="XROrigin3D"]
tracker = &"right_hand"

[node name="CanonLeft" type="Node3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 1.9484, 0, 4.04791)

[node name="CanonRight" type="Node3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, -1.92905, 0, 4.05541)

[node name="ShotInterval" type="Timer" parent="."]
wait_time = 0.2
autostart = true

[node name="ShootSound" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2.65643)
stream = ExtResource("3_5r6up")
volume_db = -17.447
script = ExtResource("4_upq0j")

[node name="DamageSound" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.23588)
stream = ExtResource("8_2v0aq")
volume_db = -13.559
script = ExtResource("4_upq0j")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_3d6mu")
}

[node name="Crossair" type="Sprite3D" parent="." node_paths=PackedStringArray("xrcamera_node", "xrorigin_node")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 4.74399)
pixel_size = 0.015
alpha_cut = 1
texture_filter = 2
texture = ExtResource("9_y81nc")
script = ExtResource("10_6k6qn")
xrcamera_node = NodePath("../XROrigin3D/XRCamera3D")
xrorigin_node = NodePath("../XROrigin3D")

[node name="Instructions" type="Label3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0.392949, 1.47267)
pixel_size = 0.001
modulate = Color(0.984314, 0.572549, 0, 1)
text = "Thx for testing this prototype

press A on your right controller to start

Controlls:
Right stick to controll the ship
Right trigger to shoot"
font_size = 26

[node name="Healthbar" type="AnimatedSprite3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, -7.49289e-08, 0.515173, 0.857086, 4.50378e-08, 0.857086, -0.515173, 0, -0.199055, 1.19937)
pixel_size = 0.02
texture_filter = 0
sprite_frames = SubResource("SpriteFrames_kdg36")
animation = &"Health"
frame = 4
frame_progress = 0.369453

[node name="Instructions2" type="Label3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, -7.45426e-08, 0.522454, 0.852668, 4.56744e-08, 0.852668, -0.522454, 0, -0.269249, 1.07082)
pixel_size = 0.001
modulate = Color(0.984314, 0.572549, 0, 1)
text = "Press B to go back to Menu


"
font_size = 26

[node name="Score" type="Label3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, -7.45426e-08, 0.522454, 0.852668, 4.56744e-08, 0.852668, -0.522454, 0, -0.135375, 1.28254)
pixel_size = 0.001
modulate = Color(0.984314, 0.572549, 0, 1)
text = "Score: 0"
font_size = 26

[node name="EnemyAimPoint" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 40)

[connection signal="area_entered" from="." to="." method="_on_area_entered"]
[connection signal="button_pressed" from="XROrigin3D/RightHand" to="." method="_on_right_hand_button_pressed"]
[connection signal="button_released" from="XROrigin3D/RightHand" to="." method="_on_right_hand_button_released"]
[connection signal="input_vector2_changed" from="XROrigin3D/RightHand" to="." method="_on_right_hand_input_vector_2_changed"]
[connection signal="timeout" from="ShotInterval" to="." method="_on_shot_interval_timeout"]

[editable path="Mesh"]
